---
phase: 01-platform-abstraction-foundation
plan: 04
type: execute
wave: 3
depends_on: [01-02]
files_modified:
  - package.json
  - tsconfig.json
  - .gitignore
autonomous: true

must_haves:
  truths:
    - TypeScript compilation is configured for src/ directory
    - JavaScript output goes to dist/ directory
    - Build process integrates with existing npm workflow
  artifacts:
    - path: tsconfig.json
      provides: TypeScript compiler configuration
      contains: '"outDir": "dist"'
      min_lines: 15
    - path: package.json
      provides: Build scripts for TypeScript compilation
      contains: '"build": "tsc"'
      min_lines: 35
    - path: .gitignore
      provides: Ignores compiled JS output
      contains: "dist/"
  key_links:
    - from: package.json
      to: tsconfig.json
      via: npm run build executes tsc
      pattern: '"build".*tsc'
---

<objective>
Add TypeScript compilation infrastructure to support platform abstraction TypeScript files while maintaining existing JavaScript code.

Purpose: Enable TypeScript source files (src/platform/*.ts) to compile to JavaScript for Node.js execution, without migrating existing codebase.

Output: TypeScript configuration, build scripts, and .gitignore updates for hybrid JS/TS project.
</objective>

<execution_context>
@/Users/juliano.farias/code/github/get-shit-done/.claude/get-shit-done/workflows/execute-plan.md
@/Users/juliano.farias/code/github/get-shit-done/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@/Users/juliano.farias/code/github/get-shit-done/.planning/PROJECT.md
@/Users/juliano.farias/code/github/get-shit-done/.planning/ROADMAP.md
@/Users/juliano.farias/code/github/get-shit-done/.planning/STATE.md
@/Users/juliano.farias/code/github/get-shit-done/.planning/REQUIREMENTS.md
@/Users/juliano.farias/code/github/get-shit-done/.planning/phases/01-platform-abstraction-foundation/01-RESEARCH.md
@/Users/juliano.farias/code/github/get-shit-done/package.json

Current state:
- Package has zero runtime dependencies (Node.js stdlib only)
- No TypeScript configuration exists
- No build step exists (pure JS package)

Target:
- Add TypeScript as devDependency only
- Compile TypeScript to JavaScript for distribution
- Keep zero runtime dependencies (TypeScript is build-time only)

From RESEARCH.md Standard Stack:
- TypeScript 5.x for type safety and interface contracts
- Node.js stdlib only (fs, path, os) - no runtime dependencies

Dependencies:
- Requires src/platform/registry.ts, paths.ts, adapter.ts from Plan 02
- This is foundational build infrastructure (does NOT depend on install script integration)
</context>

<tasks>

<task type="auto">
  <name>Add TypeScript configuration</name>
  <files>tsconfig.json</files>
  <action>
Create tsconfig.json in project root with configuration for Node.js 16.7.0+ target.

Configuration:
```json
{
  "compilerOptions": {
    "target": "ES2021",
    "module": "commonjs",
    "lib": ["ES2021"],
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true,
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "types": ["node"]
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", "**/*.spec.ts"]
}
```

Rationale:
- ES2021 target matches Node.js 16.7.0+ capabilities
- CommonJS module for Node.js compatibility
- outDir: dist/ keeps compiled JS separate from source
- strict: true for maximum type safety
- declaration: true generates .d.ts files for TypeScript consumers
- sourceMap: true for debugging

This config only affects src/ directory - existing JS files in bin/, hooks/, commands/ are untouched.
  </action>
  <verify>npx tsc --showConfig - should print resolved config without errors</verify>
  <done>tsconfig.json exists with Node.js-compatible TypeScript configuration</done>
</task>

<task type="auto">
  <name>Update package.json for TypeScript build</name>
  <files>package.json</files>
  <action>
Modify package.json to add TypeScript build infrastructure.

Add to devDependencies:
```json
"devDependencies": {
  "typescript": "^5.3.0",
  "@types/node": "^16.18.0"
}
```

Add scripts:
```json
"scripts": {
  "build": "tsc",
  "watch": "tsc --watch",
  "clean": "rm -rf dist"
}
```

Add files array to include compiled output in npm package:
```json
"files": [
  "bin",
  "commands",
  "get-shit-done",
  "agents",
  "hooks",
  "src",
  "dist"
]
```

Preserve existing fields:
- name: "get-shit-done-cc"
- version: current version
- bin: existing value
- engines: "node": ">=16.7.0"

Do NOT add runtime dependencies. TypeScript is devDependency only - compiled JS output is shipped, not TypeScript source.

Note: After this change, package.json will have devDependencies but still zero dependencies (runtime).
  </action>
  <verify>
```bash
npm install
npm run build
ls dist/platform/*.js  # Should show compiled JS files
```
  </verify>
  <done>package.json includes TypeScript build scripts and devDependencies without adding runtime dependencies</done>
</task>

<task type="auto">
  <name>Update .gitignore for build artifacts</name>
  <files>.gitignore</files>
  <action>
Add TypeScript build artifacts to .gitignore.

Append:
```
# TypeScript build output
dist/
*.tsbuildinfo

# TypeScript cache
.tsbuildinfo
```

Keep existing entries:
- node_modules/
- .DS_Store
- (any other existing patterns)

Rationale: dist/ contains compiled JavaScript from src/, which should be generated during `npm install` or `npm run build`, not committed to git.
  </action>
  <verify>cat .gitignore | grep -E "dist/|tsbuildinfo" - should find the new entries</verify>
  <done>.gitignore excludes TypeScript build artifacts from version control</done>
</task>

</tasks>

<verification>
- [ ] tsconfig.json exists with correct Node.js target and output settings
- [ ] package.json has TypeScript devDependencies
- [ ] package.json has build/watch/clean scripts
- [ ] package.json files array includes src/ and dist/
- [ ] .gitignore excludes dist/ and *.tsbuildinfo
- [ ] npm install succeeds without errors
- [ ] npm run build compiles TypeScript to dist/
- [ ] No runtime dependencies added (dependencies field still empty)
</verification>

<success_criteria>
TypeScript infrastructure is configured:
- tsconfig.json compiles src/ to dist/ with CommonJS modules
- npm run build compiles TypeScript successfully
- Compiled JS output works with Node.js 16.7.0+
- Zero runtime dependencies maintained (TypeScript is devDependency only)
- Existing JavaScript files (bin/, hooks/, commands/) are unaffected
- Build artifacts excluded from git
</success_criteria>

<output>
After completion, create `.planning/phases/01-platform-abstraction-foundation/01-04-SUMMARY.md`
</output>
