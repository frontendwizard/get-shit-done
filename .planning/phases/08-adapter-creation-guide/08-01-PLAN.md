---
phase: 08-adapter-creation-guide
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/platform/CREATING-ADAPTERS.md
  - docs/PLATFORM-SUPPORT.md
  - docs/platform/ARCHITECTURE.md
autonomous: true
user_setup: []

must_haves:
  truths:
    - "A new contributor can follow 'Your First Adapter' from zero to working adapter"
    - "Registration checklist explicitly lists all 4 files requiring changes"
    - "Testing section shows how to run contract tests and write platform-specific tests"
    - "Pre-PR checklist allows self-verification before submitting"
    - "Links exist from main docs and PLATFORM-SUPPORT.md to new platform docs"
  artifacts:
    - path: "docs/platform/CREATING-ADAPTERS.md"
      provides: "Step-by-step adapter creation tutorial"
      min_lines: 250
      contains: "Your First Adapter"
    - path: "docs/PLATFORM-SUPPORT.md"
      provides: "Link to adapter creation guide"
      contains: "CREATING-ADAPTERS"
    - path: "docs/platform/ARCHITECTURE.md"
      provides: "Link to adapter creation guide"
      contains: "CREATING-ADAPTERS"
  key_links:
    - from: "docs/PLATFORM-SUPPORT.md"
      to: "docs/platform/CREATING-ADAPTERS.md"
      via: "markdown link"
      pattern: "CREATING-ADAPTERS.md"
    - from: "docs/platform/ARCHITECTURE.md"
      to: "docs/platform/CREATING-ADAPTERS.md"
      via: "markdown link"
      pattern: "CREATING-ADAPTERS.md"
---

<objective>
Create the adapter creation guide for contributors who want to add support for new AI coding platforms.

Purpose: Enable external contributors to add new platform adapters (e.g., Cursor, Aider, Continue) without reverse-engineering the codebase. This completes the v2.1 Platform Documentation milestone.

Output:
- `docs/platform/CREATING-ADAPTERS.md` - Complete step-by-step tutorial
- Updated `docs/PLATFORM-SUPPORT.md` with link to guide
- Updated `docs/platform/ARCHITECTURE.md` with link to guide
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-adapter-creation-guide/08-RESEARCH.md
@.planning/phases/07-architecture-documentation/07-01-SUMMARY.md
@docs/platform/ARCHITECTURE.md
@docs/PLATFORM-SUPPORT.md
@src/platform/adapter.ts
@src/platform/types.ts
@src/platform/detection.ts
@src/platform/paths.ts
@src/platform/registry.ts
@src/platform/adapters/opencode.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create CREATING-ADAPTERS.md tutorial</name>
  <files>docs/platform/CREATING-ADAPTERS.md</files>
  <action>
Create comprehensive adapter creation guide with these sections:

1. **Prerequisites** (~20 lines)
   - Link to ARCHITECTURE.md as required reading
   - List TypeScript knowledge requirements
   - Note that reader should have GSD installed and working

2. **Quick Start Overview** (~30 lines)
   - Summary of the 4-file change process
   - High-level flow: Type → Detection → Paths → Adapter

3. **Your First Adapter: Step-by-Step** (~150 lines)
   This is the main tutorial. Use a fictional "ExamplePlatform" as the walkthrough target.
   
   **Step 1: Add Platform Type** (~15 lines)
   - File: `src/platform/types.ts`
   - Show exact line to modify
   - Code snippet: `export type PlatformType = 'claude-code' | 'opencode' | 'example' | 'unknown';`
   
   **Step 2: Add Detection Logic** (~30 lines)
   - File: `src/platform/detection.ts`
   - Show where to add filesystem probing
   - Code snippet for checking config file existence
   - Update ambiguity handling
   
   **Step 3: Create Path Resolver** (~35 lines)
   - File: `src/platform/paths.ts`
   - Show full `ExamplePaths` class implementation
   - Explain each method (getConfigDir, getCommandsDir, getAgentsDir, getHooksDir)
   - Note about absolute paths requirement
   
   **Step 4: Create Adapter Implementation** (~50 lines)
   - File: `src/platform/adapters/example.ts`
   - Show minimal adapter skeleton
   - Reference OpenCode adapter for graceful degradation pattern
   - Note which methods can start as stubs vs required
   
   **Step 5: Register in Factory** (~20 lines)
   - File: `src/platform/registry.ts`
   - Show the switch case addition
   - TypeScript exhaustiveness will catch missing cases

4. **Registration Checklist** (~30 lines)
   Use checkbox format for the 4 files:
   ```
   - [ ] `src/platform/types.ts` - Added to PlatformType union
   - [ ] `src/platform/detection.ts` - Added filesystem probing
   - [ ] `src/platform/paths.ts` - Created *Paths class
   - [ ] `src/platform/adapters/{name}.ts` - Created adapter class
   - [ ] `src/platform/registry.ts` - (automatic from type union)
   ```

5. **Testing Your Adapter** (~40 lines)
   - How to run existing contract tests: `npm test -- --grep "platform"`
   - How to write platform-specific tests
   - Manual verification steps (set GSD_PLATFORM env var, run commands)
   - Note about test coverage expectations

6. **Pre-PR Checklist** (~25 lines)
   Checkboxes for self-verification:
   - [ ] All 10 behavioral contracts satisfied (list them briefly)
   - [ ] Tests pass: `npm test`
   - [ ] Lint passes: `npm run lint`
   - [ ] New adapter documented in PLATFORM-SUPPORT.md
   - [ ] Detection works: `GSD_PLATFORM=example npm run dev`

7. **Troubleshooting FAQ** (~20 lines)
   - "TypeError: Cannot read property..." - Check absolute paths
   - "Platform detection returns unknown" - Check config file path
   - "Hook registration silently fails" - Check supportsHooks() return value

8. **Reference Implementation** (~15 lines)
   - Link to OpenCode adapter as reference
   - Explain why OpenCode is better reference than Claude Code (simpler, added later)

Total: ~350-400 lines
  </action>
  <verify>
File exists at docs/platform/CREATING-ADAPTERS.md with:
- "Your First Adapter" section heading
- All 5 step headings (Step 1 through Step 5)
- "Registration Checklist" section with checkboxes
- "Testing Your Adapter" section
- "Pre-PR Checklist" section
- Code snippets for each file modification
  </verify>
  <done>
Complete tutorial exists that a new contributor could follow from zero to working adapter. All sections from Requirements GUIDE-01 through GUIDE-04 are covered.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update existing docs with links</name>
  <files>docs/PLATFORM-SUPPORT.md, docs/platform/ARCHITECTURE.md</files>
  <action>
**Update docs/PLATFORM-SUPPORT.md:**

Add a new section before "Platform Detection" (around line 90):

```markdown
## Adding a New Platform

Want to add support for another AI coding platform? See the [Adapter Creation Guide](platform/CREATING-ADAPTERS.md) for step-by-step instructions.

The guide covers:
- 4-file modification process
- Complete code examples
- Testing requirements
- Pre-PR checklist
```

**Update docs/platform/ARCHITECTURE.md:**

Add a brief section at the end (before the last `---`):

```markdown
## Adding a New Platform

This document explains the **architecture**. For step-by-step instructions on implementing a new adapter, see:

**[Creating Platform Adapters](CREATING-ADAPTERS.md)** - Tutorial with code examples, checklists, and testing guide.
```

Both updates should be ~5-10 lines each.
  </action>
  <verify>
- `grep -l "CREATING-ADAPTERS" docs/PLATFORM-SUPPORT.md` returns the file
- `grep -l "CREATING-ADAPTERS" docs/platform/ARCHITECTURE.md` returns the file
- Links are valid relative paths (platform/CREATING-ADAPTERS.md from PLATFORM-SUPPORT.md, CREATING-ADAPTERS.md from ARCHITECTURE.md)
  </verify>
  <done>
Both docs link to the new tutorial. INTEG-01 requirement satisfied.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. All 3 files exist and are non-empty
2. CREATING-ADAPTERS.md has all required sections
3. Cross-links work (relative paths are correct)
4. Content is actionable (code snippets, checkboxes, step numbers)
</verification>

<success_criteria>
1. A new contributor can follow "Your First Adapter" from zero to working adapter
2. Registration checklist explicitly lists all 4 files requiring changes
3. Testing section shows how to run contract tests and write platform-specific tests
4. Pre-PR checklist allows self-verification before submitting
5. Links exist from main docs and PLATFORM-SUPPORT.md to new platform docs
</success_criteria>

<output>
After completion, create `.planning/phases/08-adapter-creation-guide/08-01-SUMMARY.md`
</output>
