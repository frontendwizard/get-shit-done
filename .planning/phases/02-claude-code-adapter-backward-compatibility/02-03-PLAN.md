---
phase: 02-claude-code-adapter-backward-compatibility
plan: 03
type: execute
wave: 3
depends_on: [02-02]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Fresh installation works identically to v1.x"
    - "Upgrade preserves existing user settings"
    - "Commands execute without errors"
    - "settings.json format is unchanged"
    - "Hooks are registered correctly"
  artifacts:
    - path: "~/.claude/settings.json"
      provides: "Properly formatted settings with GSD hooks"
      contains: "gsd-check-update.js"
    - path: "~/.claude/commands/gsd/execute-phase.md"
      provides: "Installed command files"
      contains: "@~/.claude/get-shit-done/"
  key_links:
    - from: "~/.claude/settings.json"
      to: "~/.claude/hooks/gsd-check-update.js"
      via: "SessionStart hook registration"
      pattern: "gsd-check-update"
---

<objective>
Verify that the adapter implementation works correctly by running install.js and testing that it behaves identically to v1.x. Simple manual verification - run install, check it works.

Purpose: Confirm zero regression from adapter refactoring.
Output: Verified working installation.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-claude-code-adapter-backward-compatibility/02-CONTEXT.md

# Prior plans
@.planning/phases/02-claude-code-adapter-backward-compatibility/02-01-SUMMARY.md
@.planning/phases/02-claude-code-adapter-backward-compatibility/02-02-SUMMARY.md

# Implementation to test
@bin/install.js
@src/platform/adapters/claude-code.ts
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete Phase 2 adapter implementation:
- ClaudeCodeAdapter with config and hook management
- install.js using adapter pattern
- All existing install.js logic preserved

This verification tests that the adapter integration works correctly.
  </what-built>

  <how-to-verify>
**1. Build and run installation:**
```bash
npm run build
node bin/install.js --global
```

Should complete without errors.

**2. Verify settings.json:**
```bash
cat ~/.claude/settings.json
```

Check:
- File exists and is valid JSON
- Has hooks.SessionStart with gsd-check-update.js
- Has hooks.StatusLine with gsd-statusline.js (if not skipped)
- Existing settings preserved if upgrading
- Backup file created (settings.json.backup)

**3. Verify command files:**
```bash
ls ~/.claude/commands/gsd/
```

Should see all GSD command files.

**4. Test a command in Claude Code:**
```
/gsd:help
```

Should work without errors.

**5. Verify hooks work:**

Restart Claude Code - SessionStart hook should run (check for update check).

**That's it.** Keep verification simple. If install works and commands execute, adapter is working.
  </how-to-verify>

  <resume-signal>
Reply with:

**approved** - Installation worked, commands execute, no issues

**issues: <description>** - Something broke, describe the problem
  </resume-signal>
</task>

</tasks>

<verification>
This plan IS the verification.
</verification>

<success_criteria>
- Fresh installation succeeds
- settings.json created correctly
- Commands execute in Claude Code
- No regressions from v1.x behavior
</success_criteria>

<output>
After human approval, create `.planning/phases/02-claude-code-adapter-backward-compatibility/02-03-SUMMARY.md`
</output>
